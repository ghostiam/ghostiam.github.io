<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Clickhouse on GhostIAm Блог</title><link>https://ghostiam.dev/ru/tags/clickhouse/</link><description>Recent content in Clickhouse on GhostIAm Блог</description><generator>Hugo</generator><language>ru-RU</language><lastBuildDate>Thu, 17 Feb 2022 16:08:15 +0900</lastBuildDate><atom:link href="https://ghostiam.dev/ru/tags/clickhouse/index.xml" rel="self" type="application/rss+xml"/><item><title>ClickHouse восстановление</title><link>https://ghostiam.dev/ru/posts/clickhouse-restore/</link><pubDate>Thu, 17 Feb 2022 16:08:15 +0900</pubDate><guid>https://ghostiam.dev/ru/posts/clickhouse-restore/</guid><description>&lt;p>Восстановление репликации или поехавшей агрегации, после того, как пропали данные в ZooKeeper, &lt;strong>без конвертации&lt;/strong> реплицированной таблицы в нереплицируемую &lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>.&lt;/p>
&lt;p>Если в логах у вас ошибки:&lt;/p>
&lt;div class="code-block">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">Table is in readonly mode
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Cannot allocate block number in ZooKeeper: Coordination::Exception: Transaction failed (No node)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Coordination::Exception: Can&amp;#39;t get data for node /clickhouse/tables/*/*/log: node doesn&amp;#39;t exist (No node).&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;p>А при восстановлении или создании агрегации с &lt;code>POPULATE&lt;/code>&lt;/p>
&lt;div class="code-block">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">Memory limit (for query) exceeded&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;p>то эта статья для вас.&lt;/p>
&lt;figure>&lt;img src="https://ghostiam.dev/ru/posts/clickhouse-restore/clickhouse.svg"
alt="ClickHouse, не болей">&lt;figcaption>
 &lt;p>ClickHouse, не болей&lt;/p>
&lt;/figcaption>
&lt;/figure></description></item></channel></rss>