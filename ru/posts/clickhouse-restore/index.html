<!doctype html><html lang=ru><head><title>ClickHouse –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ ¬∑ GhostIAm –ë–ª–æ–≥
</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="GhostIAm (Vladislav Fursov)"><meta name=description content="–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –∏–ª–∏ –ø–æ–µ—Ö–∞–≤—à–µ–π –∞–≥—Ä–µ–≥–∞—Ü–∏–∏, –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –ø—Ä–æ–ø–∞–ª–∏ –¥–∞–Ω–Ω—ã–µ –≤ ZooKeeper, –±–µ–∑ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Ä–µ–ø–ª–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã –≤ –Ω–µ—Ä–µ–ø–ª–∏—Ü–∏—Ä—É–µ–º—É—é 1.
–ï—Å–ª–∏ –≤ –ª–æ–≥–∞—Ö —É –≤–∞—Å –æ—à–∏–±–∫–∏:
Table is in readonly mode
Cannot allocate block number in ZooKeeper: Coordination::Exception: Transaction failed (No node)
Coordination::Exception: Can't get data for node /clickhouse/tables/*/*/log: node doesn't exist (No node).–ê –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ —Å POPULATE
Memory limit (for query) exceeded—Ç–æ —ç—Ç–∞ —Å—Ç–∞—Ç—å—è –¥–ª—è –≤–∞—Å.

  ClickHouse, –Ω–µ –±–æ–ª–µ–π

"><meta name=keywords content="ClickHouse,Table is in readonly mode,Cannot allocate block number in ZooKeeper: Coordination::Exception: Transaction failed (No node),Coordination::Exception: Can't get data for node /clickhouse/tables/*/*/log: node doesn't exist (No node).,Memory limit (for query) exceeded"><meta name=twitter:card content="summary"><meta name=twitter:title content="ClickHouse –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ"><meta name=twitter:description content="–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –∏–ª–∏ –ø–æ–µ—Ö–∞–≤—à–µ–π –∞–≥—Ä–µ–≥–∞—Ü–∏–∏, –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –ø—Ä–æ–ø–∞–ª–∏ –¥–∞–Ω–Ω—ã–µ –≤ ZooKeeper, –±–µ–∑ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Ä–µ–ø–ª–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã –≤ –Ω–µ—Ä–µ–ø–ª–∏—Ü–∏—Ä—É–µ–º—É—é 1.
–ï—Å–ª–∏ –≤ –ª–æ–≥–∞—Ö —É –≤–∞—Å –æ—à–∏–±–∫–∏:
Table is in readonly mode Cannot allocate block number in ZooKeeper: Coordination::Exception: Transaction failed (No node) Coordination::Exception: Can't get data for node /clickhouse/tables/*/*/log: node doesn't exist (No node).–ê –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ —Å POPULATE
Memory limit (for query) exceeded—Ç–æ —ç—Ç–∞ —Å—Ç–∞—Ç—å—è –¥–ª—è –≤–∞—Å.
ClickHouse, –Ω–µ –±–æ–ª–µ–π"><meta property="og:url" content="https://ghostiam.dev/ru/posts/clickhouse-restore/"><meta property="og:site_name" content="GhostIAm –ë–ª–æ–≥"><meta property="og:title" content="ClickHouse –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ"><meta property="og:description" content="–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –∏–ª–∏ –ø–æ–µ—Ö–∞–≤—à–µ–π –∞–≥—Ä–µ–≥–∞—Ü–∏–∏, –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –ø—Ä–æ–ø–∞–ª–∏ –¥–∞–Ω–Ω—ã–µ –≤ ZooKeeper, –±–µ–∑ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Ä–µ–ø–ª–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã –≤ –Ω–µ—Ä–µ–ø–ª–∏—Ü–∏—Ä—É–µ–º—É—é 1.
–ï—Å–ª–∏ –≤ –ª–æ–≥–∞—Ö —É –≤–∞—Å –æ—à–∏–±–∫–∏:
Table is in readonly mode Cannot allocate block number in ZooKeeper: Coordination::Exception: Transaction failed (No node) Coordination::Exception: Can't get data for node /clickhouse/tables/*/*/log: node doesn't exist (No node).–ê –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ —Å POPULATE
Memory limit (for query) exceeded—Ç–æ —ç—Ç–∞ —Å—Ç–∞—Ç—å—è –¥–ª—è –≤–∞—Å.
ClickHouse, –Ω–µ –±–æ–ª–µ–π"><meta property="og:locale" content="ru_RU"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-02-17T16:08:15+09:00"><meta property="article:modified_time" content="2022-02-17T16:08:15+09:00"><meta property="article:tag" content="Clickhouse"><link rel=canonical href=https://ghostiam.dev/ru/posts/clickhouse-restore/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.7763f8bc6341ecf82378e867c285e1549abb063a899be313ccd25dbfcd24fa7d.css integrity="sha256-d2P4vGNB7PgjeOhnwoXhVJq7BjqJm+MTzNJdv80k+n0=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/custom.min.4bc2042b31fe8b2ae37ea83d26d9bbebe37a341c1096ff072589efe1dd57d56c.css integrity="sha256-S8IEKzH+iyrjfqg9Jtm76+N6NBwQlv8HJYnv4d1X1Ww=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-dark"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://ghostiam.dev/ru/>GhostIAm –ë–ª–æ–≥
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/ru/>–û–±–æ –º–Ω–µ</a></li><li class=navigation-item><a class=navigation-link href=/ru/posts/>–°—Ç–∞—Ç—å–∏</a></li><li class=navigation-item><a class=navigation-link href=/ru/tags/>–¢–µ–≥–∏</a></li><li class=navigation-item><a class=navigation-link href=/ru/categories/>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class=navigation-item><a href=/en/>English üá¨üáß</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://ghostiam.dev/ru/posts/clickhouse-restore/>ClickHouse –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ</a></h1></div><div class=post-meta><div class=date><span class=posted-on title="–î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ 2022-02-17"><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=2022-02-17T16:08:15+09:00>2022-02-17
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
–ß–∏—Ç–∞—Ç—å –æ–∫–æ–ª–æ 5 –º–∏–Ω—É—Ç</span></div><div class=date></div></div></header><details class=toc><summary>–û–≥–ª–∞–≤–ª–µ–Ω–∏–µ</summary><nav class=inner><nav id=TableOfContents><ul><li><a href=#–≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º-—Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é>–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é</a><ul><li><a href=#—Å–æ–±–∏—Ä–∞–µ–º-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é>–°–æ–±–∏—Ä–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é</a></li><li><a href=#–≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º-—Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é-–¥–ª—è-—Ç–∞–±–ª–∏—Ü—ã>–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã</a></li></ul></li><li><a href=#–≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º-–∞–≥—Ä–µ–≥–∞—Ü–∏—é-materialized-view-–µ—Å–ª–∏-–æ–Ω–∞-—Å–ª–æ–º–∞–ª–∞—Å—å>–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–≥—Ä–µ–≥–∞—Ü–∏—é (materialized view), –µ—Å–ª–∏ –æ–Ω–∞ —Å–ª–æ–º–∞–ª–∞—Å—å.</a><ul><li><a href=#–ø–µ—Ä–µ—Å–æ–∑–¥–∞—ë–º-materialized-view>–ü–µ—Ä–µ—Å–æ–∑–¥–∞—ë–º materialized view</a></li><li><a href=#–æ—à–∏–±–∫–∞-memory-limit-for-query-exceeded-–∏-–∫–∞–∫-–µ—ë-–æ–±–æ–π—Ç–∏-–∫–æ–≥–¥–∞-–¥–∞–Ω–Ω—ã—Ö-–æ—á–µ–Ω—å-–º–Ω–æ–≥–æ>–û—à–∏–±–∫–∞ <code>Memory limit (for query) exceeded</code> –∏ –∫–∞–∫ –µ—ë –æ–±–æ–π—Ç–∏, –∫–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã—Ö –æ—á–µ–Ω—å –º–Ω–æ–≥–æ.</a></li></ul></li></ul></nav></nav></details><div class=post-content><p>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –∏–ª–∏ –ø–æ–µ—Ö–∞–≤—à–µ–π –∞–≥—Ä–µ–≥–∞—Ü–∏–∏, –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –ø—Ä–æ–ø–∞–ª–∏ –¥–∞–Ω–Ω—ã–µ –≤ ZooKeeper, <strong>–±–µ–∑ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏</strong> —Ä–µ–ø–ª–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã –≤ –Ω–µ—Ä–µ–ø–ª–∏—Ü–∏—Ä—É–µ–º—É—é <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>.</p><p>–ï—Å–ª–∏ –≤ –ª–æ–≥–∞—Ö —É –≤–∞—Å –æ—à–∏–±–∫–∏:</p><div class=code-block><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Table is in readonly mode
</span></span><span class=line><span class=cl>Cannot allocate block number in ZooKeeper: Coordination::Exception: Transaction failed (No node)
</span></span><span class=line><span class=cl>Coordination::Exception: Can&#39;t get data for node /clickhouse/tables/*/*/log: node doesn&#39;t exist (No node).</span></span></code></pre></div></div><p>–ê –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ —Å <code>POPULATE</code></p><div class=code-block><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Memory limit (for query) exceeded</span></span></code></pre></div></div><p>—Ç–æ —ç—Ç–∞ —Å—Ç–∞—Ç—å—è –¥–ª—è –≤–∞—Å.</p><figure><img src=/ru/posts/clickhouse-restore/clickhouse.svg alt="ClickHouse, –Ω–µ –±–æ–ª–µ–π"><figcaption><p>ClickHouse, –Ω–µ –±–æ–ª–µ–π</p></figcaption></figure><div class="notice warning"><div class=notice-title><i class="fa-solid fa-exclamation-triangle" aria-hidden=true></i>–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ</div><div class=notice-content>–í—ã –≤—Å—ë –¥–µ–ª–∞–µ—Ç–µ –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∞—Ö –∏ —Ä–∏—Å–∫.<br>–ê–≤—Ç–æ—Ä –Ω–µ –Ω–µ—Å—ë—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç—å –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö.</div></div><h2 id=–≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º-—Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é>–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é
<a class=heading-link href=#%d0%b2%d0%be%d1%81%d1%81%d1%82%d0%b0%d0%bd%d0%b0%d0%b2%d0%bb%d0%b8%d0%b2%d0%b0%d0%b5%d0%bc-%d1%80%d0%b5%d0%bf%d0%bb%d0%b8%d0%ba%d0%b0%d1%86%d0%b8%d1%8e><i class="fa-solid fa-link" aria-hidden=true title="–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫"></i>
<span class=sr-only>–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫</span></a></h2><h3 id=—Å–æ–±–∏—Ä–∞–µ–º-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é>–°–æ–±–∏—Ä–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
<a class=heading-link href=#%d1%81%d0%be%d0%b1%d0%b8%d1%80%d0%b0%d0%b5%d0%bc-%d0%b8%d0%bd%d1%84%d0%be%d1%80%d0%bc%d0%b0%d1%86%d0%b8%d1%8e><i class="fa-solid fa-link" aria-hidden=true title="–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫"></i>
<span class=sr-only>–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫</span></a></h3><p>–î–ª—è –Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ —É–∑–Ω–∞—Ç—å, –Ω–∞ —Å–∫–æ–ª—å–∫–æ –≤—Å—ë –ø–ª–æ—Ö–æ —Å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–µ–π, –ø–æ—Ç–µ—Ä—è–ª–∏ –ª–∏ –º—ã –≤—Å–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ ZooKeeper –∏–ª–∏ —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å —Ç–∞–±–ª–∏—Ü.<br>–î–ª—è —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ ZooKeeper –∫–ª–∏–µ–Ω—Ç–æ–º, —Ç–∞–∫ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞–ø—Ä—è–º—É—é –∏–∑ ClickHouse:</p><div class=code-block><div class=lang-name>ClickHouse</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>zookeeper</span><span class=p>.</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>tables</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>materialized_name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=k>system</span><span class=p>.</span><span class=n>zookeeper</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=k>LEFT</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=k>system</span><span class=p>.</span><span class=n>tables</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>concat</span><span class=p>(</span><span class=s1>&#39;.inner_id.&#39;</span><span class=p>,</span><span class=w> </span><span class=n>toString</span><span class=p>(</span><span class=n>tables</span><span class=p>.</span><span class=n>uuid</span><span class=p>))</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>zookeeper</span><span class=p>.</span><span class=n>name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>path</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;/clickhouse/tables/{DATABASE}&#39;</span><span class=w> </span><span class=c1>-- –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –∏–º—è —Å–≤–æ–µ–π –ë–î
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>name</span><span class=p>;</span></span></span></code></pre></div></div><p>–ü–æ–ª—É—á–∏–º —Å–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü, –¥–∞–Ω–Ω—ã–µ –æ –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å –≤ ZooKeeper:</p><div class=table-wrapper><table><thead><tr><th style=text-align:left>name</th><th style=text-align:left>materialized_name</th></tr></thead><tbody><tr><td style=text-align:left>.inner_id.b8915dd6-&mldr;</td><td style=text-align:left>aggregating_my_data</td></tr><tr><td style=text-align:left>.inner_id.ed7d79c6-&mldr;</td><td style=text-align:left>aggregating_my_data_2</td></tr><tr><td style=text-align:left>my_data</td><td style=text-align:left></td></tr></tbody></table></div><p>–î–∞–ª–µ–µ —Å—Ç–æ–∏—Ç –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ <code>ReadOnly</code>:</p><div class=code-block><div class=lang-name>ClickHouse</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>replicas</span><span class=p>.</span><span class=k>database</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=p>,</span><span class=w> </span><span class=n>replicas</span><span class=p>.</span><span class=k>table</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=p>,</span><span class=w> </span><span class=n>tables</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>materialized_name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=p>,</span><span class=w> </span><span class=n>replicas</span><span class=p>.</span><span class=n>is_readonly</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>--      , replicas.zookeeper_path
</span></span></span><span class=line><span class=cl><span class=c1>--      , replicas.absolute_delay
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>     </span><span class=p>,</span><span class=w> </span><span class=n>replicas</span><span class=p>.</span><span class=n>replica_is_active</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=k>system</span><span class=p>.</span><span class=n>replicas</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=k>LEFT</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=k>system</span><span class=p>.</span><span class=n>tables</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>concat</span><span class=p>(</span><span class=s1>&#39;.inner_id.&#39;</span><span class=p>,</span><span class=w> </span><span class=n>toString</span><span class=p>(</span><span class=n>tables</span><span class=p>.</span><span class=n>uuid</span><span class=p>))</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>replicas</span><span class=p>.</span><span class=k>table</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>replicas</span><span class=p>.</span><span class=n>is_readonly</span><span class=w> </span><span class=k>DESC</span><span class=p>;</span></span></span></code></pre></div></div><p>–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, –º—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –æ–¥–Ω—É —Ç–∞–±–ª–∏—Ü—É <code>aggregating_my_data_3</code>, –æ–Ω–∞ –±—É–¥–µ—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ <code>ReadOnly</code>:</p><div class=table-wrapper><table><thead><tr><th style=text-align:left>database</th><th style=text-align:left>table</th><th style=text-align:left>materialized_name</th><th style=text-align:left>is_readonly</th><th style=text-align:left>replica_is_active</th></tr></thead><tbody><tr><td style=text-align:left>{DATABASE}</td><td style=text-align:left>.inner_id.a4263b9a-&mldr;</td><td style=text-align:left>aggregating_my_data_3</td><td style=text-align:left>1</td><td style=text-align:left>{}</td></tr><tr><td style=text-align:left>{DATABASE}</td><td style=text-align:left>.inner_id.b8915dd6-&mldr;</td><td style=text-align:left>aggregating_my_data</td><td style=text-align:left>0</td><td style=text-align:left>{&lsquo;ch1.blog.ghostiam.dev&rsquo;:1,&lsquo;ch2.blog.ghostiam.dev&rsquo;:1}</td></tr><tr><td style=text-align:left>{DATABASE}</td><td style=text-align:left>.inner_id.ed7d79c6-&mldr;</td><td style=text-align:left>aggregating_my_data_2</td><td style=text-align:left>0</td><td style=text-align:left>{&lsquo;ch1.blog.ghostiam.dev&rsquo;:1,&lsquo;ch2.blog.ghostiam.dev&rsquo;:1}</td></tr><tr><td style=text-align:left>{DATABASE}</td><td style=text-align:left>my_data</td><td style=text-align:left></td><td style=text-align:left>0</td><td style=text-align:left>{&lsquo;ch1.blog.ghostiam.dev&rsquo;:1,&lsquo;ch2.blog.ghostiam.dev&rsquo;:1}</td></tr></tbody></table></div><h3 id=–≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º-—Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é-–¥–ª—è-—Ç–∞–±–ª–∏—Ü—ã>–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã
<a class=heading-link href=#%d0%b2%d0%be%d1%81%d1%81%d1%82%d0%b0%d0%bd%d0%b0%d0%b2%d0%bb%d0%b8%d0%b2%d0%b0%d0%b5%d0%bc-%d1%80%d0%b5%d0%bf%d0%bb%d0%b8%d0%ba%d0%b0%d1%86%d0%b8%d1%8e-%d0%b4%d0%bb%d1%8f-%d1%82%d0%b0%d0%b1%d0%bb%d0%b8%d1%86%d1%8b><i class="fa-solid fa-link" aria-hidden=true title="–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫"></i>
<span class=sr-only>–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫</span></a></h3><div class="notice note"><div class=notice-title><i class="fa-solid fa-sticky-note" aria-hidden=true></i>–ó–∞–º–µ—Ç–∫–∞</div><div class=notice-content>–í —Å–ª—É—á–∞–µ –ø–æ—Ç–µ—Ä–∏ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –≤ ZooKeeper, –≤–∞–º –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏–¥—ë—Ç—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –Ω–∏–∂–µ –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü—ã.</div></div><p>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–º metadata —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã <sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>:</p><div class=code-block><div class=lang-name>ClickHouse</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- –ò–∑ –∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –∏–º–µ—é—Ç –∏–º–µ–Ω–∞ —Å —Ç–æ—á–∫–æ–π,
</span></span></span><span class=line><span class=cl><span class=c1>-- –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–∫–ª—é—á–∞—Ç—å –∏–º—è –≤ –æ–±—Ä–∞—Ç–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SYSTEM</span><span class=w> </span><span class=n>RESTORE</span><span class=w> </span><span class=n>REPLICA</span><span class=w> </span><span class=err>{</span><span class=k>DATABASE</span><span class=err>}</span><span class=p>.</span><span class=o>`</span><span class=p>.</span><span class=n>inner_id</span><span class=p>.</span><span class=n>a4263b9a</span><span class=o>-</span><span class=p>...</span><span class=o>`</span><span class=p>;</span></span></span></code></pre></div></div><p>–ï—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å —Å—Ä–∞–∑—É –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä–µ –¥–æ–±–∞–≤–∏–≤ <code>ON CLUSTER '{cluster-name}';</code>,
–Ω–æ —É –º–µ–Ω—è —ç—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –ø—Ä–∏–≤–æ–¥–∏–ª–∞ —Ç–æ–ª—å–∫–æ –∫ —á–∞—Å—Ç–∏—á–Ω–æ–º—É –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—é, –ø–æ—ç—Ç–æ–º—É —Å–æ–≤–µ—Ç—É—é –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥—É –Ω–∞ –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–µ—Ä–µ –æ—Ç–¥–µ–ª—å–Ω–æ.<br>–ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å –ø–æ–∫–∞–∂–µ—Ç —Å—Ç–∞—Ç—É—Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ <code>Restore in progress.</code> –∏–ª–∏ –µ—Å–ª–∏ –≤—Å—ë –ø—Ä–æ—à–ª–æ —É—Å–ø–µ—à–Ω–æ, –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞ <code>Replica must be readonly.</code></p><p>–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ <code>SYSTEM RESTORE REPLICA</code>, –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∑–∞–ø–∏—Å—å –≤ ZooKeeper –∏ —Å–Ω—è—Ç—å—Å—è —Ñ–ª–∞–≥ <code>is_readonly</code>,
–∞ —Ç–∞–∫ –∂–µ –ø–æ—è–≤–∏—Ç—Å—è –∑–∞–ø–∏—Å—å –æ —Å–µ—Ä–≤–µ—Ä–µ, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—á–∞–ª —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é –≤ <code>replica_is_active</code>
(—á—Ç–æ–±—ã —ç—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å—ã —Å–Ω–æ–≤–∞, –∫–∞–∫ –º—ã —ç—Ç–æ –¥–µ–ª–∞–ª–∏, –∫–æ–≥–¥–∞ <a href=#—Å–æ–±–∏—Ä–∞–µ–º-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é>—Å–æ–±–∏—Ä–∞–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é</a>
).</p><h2 id=–≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º-–∞–≥—Ä–µ–≥–∞—Ü–∏—é-materialized-view-–µ—Å–ª–∏-–æ–Ω–∞-—Å–ª–æ–º–∞–ª–∞—Å—å>–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–≥—Ä–µ–≥–∞—Ü–∏—é (materialized view), –µ—Å–ª–∏ –æ–Ω–∞ —Å–ª–æ–º–∞–ª–∞—Å—å.
<a class=heading-link href=#%d0%b2%d0%be%d1%81%d1%81%d1%82%d0%b0%d0%bd%d0%b0%d0%b2%d0%bb%d0%b8%d0%b2%d0%b0%d0%b5%d0%bc-%d0%b0%d0%b3%d1%80%d0%b5%d0%b3%d0%b0%d1%86%d0%b8%d1%8e-materialized-view-%d0%b5%d1%81%d0%bb%d0%b8-%d0%be%d0%bd%d0%b0-%d1%81%d0%bb%d0%be%d0%bc%d0%b0%d0%bb%d0%b0%d1%81%d1%8c><i class="fa-solid fa-link" aria-hidden=true title="–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫"></i>
<span class=sr-only>–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫</span></a></h2><p>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –º—ã –¥–∞–Ω–Ω—ã–µ, –Ω–æ –∫ –Ω–∞—à–µ–º—É –Ω–µ—Å—á–∞—Å—Ç—å—é, –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –æ—Ç—Å—Ç–∞–ª–∞, –∏ –¥–∞–Ω–Ω—ã–µ,
–∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø–∏—Å—ã–≤–∞–ª–∏—Å—å –≤ —Ç–æ –≤—Ä–µ–º—è –ø–æ–∫–∞ —Ç–∞–±–ª–∏—Ü–∞ –±—ã–ª–∞ –≤ <code>ReadOnly</code> –Ω–µ –∑–∞–ø–∏—Å–∞–Ω—ã –≤ –Ω–∞—à—É –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ç–∞–±–ª–∏—Ü—É,
–∏–ª–∏, —á—Ç–æ –µ—â—ë —Ö—É–∂–µ, —Ç–∞–±–ª–∏—Ü–∞ –æ–±–Ω—É–ª–∏–ª–∞—Å—å –∏ –≤ –Ω–µ–π –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ —Å –º–æ–º–µ–Ω—Ç–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.</p><p>–î—É–º–∞—é, –ª—É—á—à–∏–º —Å–ø–æ—Å–æ–±–æ–º –±—É–¥–µ—Ç –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∞–≥—Ä–µ–≥–∞—Ü–∏—é, –Ω–æ —ç—Ç–æ –Ω–µ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ, –∫–∞–∫ –∫–∞–∂–µ—Ç—Å—è –Ω–∞ –ø–µ—Ä–≤—ã–π –≤–∑–≥–ª—è–¥&mldr;</p><p>–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –≤ ClickHouse –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –¥–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã,
—á—Ç–æ–±—ã –¥–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–ª–æ–∂–∏–ª–∏—Å—å –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞ –∏ –º—ã –Ω–µ –ø–æ–ª—É—á–∏–ª–∏ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –∏–∑-–∑–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.<br>–Ø –±—ã —Å–æ–≤–µ—Ç–æ–≤–∞–ª –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å, –µ—Å–ª–∏ —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ –∏ –¥–∞–Ω–Ω—ã–µ –≥–¥–µ-—Ç–æ –±—É—Ñ–µ—Ä–∏–∑—É—é—Ç—Å—è –¥–æ –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ ClickHouse (–∫–∞–∫ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ —É –º–µ–Ω—è).
–ú–æ–∂–Ω–æ –æ–±–æ–π—Ç–∏—Å—å –∏ –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–ø–∏—Å–∏, –¥–∞–ª–µ–µ –æ–ø–∏—à—É –º—ã—Å–ª–∏ –Ω–∞ —ç—Ç–æ—Ç —Å—á—ë—Ç, –Ω–æ —è –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª –∞–≥—Ä–µ–≥–∞—Ü–∏—é –æ—Å—Ç–∞–Ω–æ–≤–∏–≤ –∑–∞–ø–∏—Å—å –≤ ClickHouse.</p><h3 id=–ø–µ—Ä–µ—Å–æ–∑–¥–∞—ë–º-materialized-view>–ü–µ—Ä–µ—Å–æ–∑–¥–∞—ë–º materialized view
<a class=heading-link href=#%d0%bf%d0%b5%d1%80%d0%b5%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d1%91%d0%bc-materialized-view><i class="fa-solid fa-link" aria-hidden=true title="–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫"></i>
<span class=sr-only>–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫</span></a></h3><p>–ù—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—É—é <code>view</code> –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å –¥—Ä—É–≥–∏–º –∏–º–µ–Ω–µ–º.<br>–ï—Å–ª–∏ –≤ –∑–∞–ø—Ä–æ—Å–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è <code>POPULATE</code> –∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –æ—à–∏–±–∫–∞ <code>Memory limit (for query) exceeded</code>, —Ç–æ –ø—Ä–∏–¥—ë—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å <code>view</code> –±–µ–∑ –Ω–µ—ë –∏
—Ä–∞–∑–±–∏—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–æ–ª–µ–µ –º–µ–ª–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, –∫–∞–∫ –æ–ø–∏—Å–∞–Ω–æ –¥–∞–ª–µ–µ.</p><h3 id=–æ—à–∏–±–∫–∞-memory-limit-for-query-exceeded-–∏-–∫–∞–∫-–µ—ë-–æ–±–æ–π—Ç–∏-–∫–æ–≥–¥–∞-–¥–∞–Ω–Ω—ã—Ö-–æ—á–µ–Ω—å-–º–Ω–æ–≥–æ>–û—à–∏–±–∫–∞ <code>Memory limit (for query) exceeded</code> –∏ –∫–∞–∫ –µ—ë –æ–±–æ–π—Ç–∏, –∫–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã—Ö –æ—á–µ–Ω—å –º–Ω–æ–≥–æ.
<a class=heading-link href=#%d0%be%d1%88%d0%b8%d0%b1%d0%ba%d0%b0-memory-limit-for-query-exceeded-%d0%b8-%d0%ba%d0%b0%d0%ba-%d0%b5%d1%91-%d0%be%d0%b1%d0%be%d0%b9%d1%82%d0%b8-%d0%ba%d0%be%d0%b3%d0%b4%d0%b0-%d0%b4%d0%b0%d0%bd%d0%bd%d1%8b%d1%85-%d0%be%d1%87%d0%b5%d0%bd%d1%8c-%d0%bc%d0%bd%d0%be%d0%b3%d0%be><i class="fa-solid fa-link" aria-hidden=true title="–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫"></i>
<span class=sr-only>–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫</span></a></h3><p>–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:</p><div class=code-block><div class=lang-name>ClickHouse</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=n>MATERIALIZED</span><span class=w> </span><span class=k>VIEW</span><span class=w> </span><span class=err>{</span><span class=k>DATABASE</span><span class=err>}</span><span class=p>.</span><span class=n>aggregating_my_data_3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>ON</span><span class=w> </span><span class=k>CLUSTER</span><span class=w> </span><span class=s1>&#39;{cluster-name}&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>ENGINE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ReplicatedAggregatingMergeTree</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>PARTITION</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>toYYYYMM</span><span class=p>(</span><span class=n>timestampHour</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=p>(</span><span class=n>user_id</span><span class=p>,</span><span class=w> </span><span class=n>timestampHour</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>AS</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>user_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=p>,</span><span class=w> </span><span class=n>sumState</span><span class=p>(</span><span class=n>download</span><span class=p>)</span><span class=w>                                            </span><span class=k>AS</span><span class=w> </span><span class=n>download</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=p>,</span><span class=w> </span><span class=n>sumState</span><span class=p>(</span><span class=n>upload</span><span class=p>)</span><span class=w>                                              </span><span class=k>AS</span><span class=w> </span><span class=n>upload</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=c1>-- –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞–µ–º timestamp –≤ timestamp –ø–æ —á–∞—Å–∞–º
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>     </span><span class=p>,</span><span class=w> </span><span class=n>toDateTime</span><span class=p>(</span><span class=n>toInt64</span><span class=p>(</span><span class=n>toUnixTimestamp</span><span class=p>(</span><span class=k>timestamp</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mi>3600</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>3600</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>timestampHour</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=err>{</span><span class=k>DATABASE</span><span class=err>}</span><span class=p>.</span><span class=n>my_data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>user_id</span><span class=p>,</span><span class=w> </span><span class=n>timestampHour</span><span class=p>;</span></span></span></code></pre></div></div><p>–ù–æ –≤ –Ω–∞—à–µ–π —Ç–∞–±–ª–∏—Ü–µ <code>my_data</code> –±–æ–ª–µ–µ 5TB –¥–∞–Ω–Ω—ã—Ö –∏ –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –º—ã –Ω–µ –º–æ–∂–µ–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–≥—Ä–µ–≥–∞—Ü–∏—é, –¥–ª—è —ç—Ç–æ–≥–æ –Ω–∞–¥–æ —Ä–∞–∑–±–∏—Ç—å –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã –ø–æ –º–µ–Ω—å—à–µ –∏—Å–ø–æ–ª—å–∑—É—è <code>WHERE</code> (–≤—Ä–µ–º–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø–æ–¥–±–∏—Ä–∞–µ—Ç—Å—è –æ–ø—ã—Ç–Ω—ã–º –ø—É—Ç—ë–º):</p><div class=code-block><div class=lang-name>ClickHouse</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>user_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=p>,</span><span class=w> </span><span class=n>sumState</span><span class=p>(</span><span class=n>download</span><span class=p>)</span><span class=w>                                            </span><span class=k>AS</span><span class=w> </span><span class=n>download</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=p>,</span><span class=w> </span><span class=n>sumState</span><span class=p>(</span><span class=n>upload</span><span class=p>)</span><span class=w>                                              </span><span class=k>AS</span><span class=w> </span><span class=n>upload</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=c1>-- –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞–µ–º timestamp –≤ timestamp –ø–æ —á–∞—Å–∞–º
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>     </span><span class=p>,</span><span class=w> </span><span class=n>toDateTime</span><span class=p>(</span><span class=n>toInt64</span><span class=p>(</span><span class=n>toUnixTimestamp</span><span class=p>(</span><span class=k>timestamp</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mi>3600</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>3600</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>timestampHour</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=err>{</span><span class=k>DATABASE</span><span class=err>}</span><span class=p>.</span><span class=n>my_data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>toDate</span><span class=p>(</span><span class=k>timestamp</span><span class=p>)</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=s1>&#39;2022-01-01&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>AND</span><span class=w> </span><span class=n>toDate</span><span class=p>(</span><span class=k>timestamp</span><span class=p>)</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=s1>&#39;2022-01-10&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>user_id</span><span class=p>,</span><span class=w> </span><span class=n>timestampHour</span><span class=p>;</span></span></span></code></pre></div></div><p>–£–∂–µ —Ç–∞–∫–æ–π –∑–∞–ø—Ä–æ—Å –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏, –Ω–æ —è –≤—Å—ë –∂–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –ø–æ–¥–µ–ª–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –Ω–∞ 2(–æ—á–µ–Ω—å —Ä–µ–∫–æ–º–µ–Ω–¥—É—é, —Ç–∞–∫ –∫–∞–∫ –ø–æ—Ç—Ä–∞—Ç–∏–ª –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ, –∫–æ–≥–¥–∞ –¥–µ–ª–∞–ª —ç—Ç–æ –ø–µ—Ä–≤—ã–π —Ä–∞–∑), —á—Ç–æ–±—ã –≤ –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å –¥–µ–Ω—å –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å –±–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –≤—Å—ë –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–π–¥—ë—Ç –Ω–∞—Å–º–∞—Ä–∫—É –∏–∑-–∑–∞ –æ—à–∏–±–∫–∏&mldr;</p><div class="notice note"><div class=notice-title><i class="fa-solid fa-sticky-note" aria-hidden=true></i>–ö—Å—Ç–∞—Ç–∏</div><div class=notice-content>–î–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ–π –ø–∞–º—è—Ç–∏ –∑–∞–ø—Ä–æ—Å—É, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–ª–∞–≥:<br><code>clickhouse-client --max_memory_usage 30G</code><br>–Ω–æ –Ω–µ —Å–æ–≤–µ—Ç—É—é —Å—Ç–∞–≤–∏—Ç—å –µ–≥–æ –±–æ–ª–µ–µ 80% –ø–∞–º—è—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.</div></div><p>–ò –≤ –∫–æ–Ω–µ—á–Ω–æ–º —Å—á—ë—Ç–µ –º—ã –ø–æ–ª—É—á–∏–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤–∏–¥–∞:</p><div class=code-block><div class=lang-name>ClickHouse</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 2022-01-01 - 2022-01-05
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>INSERT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>INTO</span><span class=w> </span><span class=err>{</span><span class=k>DATABASE</span><span class=err>}</span><span class=p>.</span><span class=n>aggregating_my_data_3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>user_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=p>,</span><span class=w> </span><span class=n>sumState</span><span class=p>(</span><span class=n>download</span><span class=p>)</span><span class=w>                                            </span><span class=k>AS</span><span class=w> </span><span class=n>download</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=p>,</span><span class=w> </span><span class=n>sumState</span><span class=p>(</span><span class=n>upload</span><span class=p>)</span><span class=w>                                              </span><span class=k>AS</span><span class=w> </span><span class=n>upload</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=p>,</span><span class=w> </span><span class=n>toDateTime</span><span class=p>(</span><span class=n>toInt64</span><span class=p>(</span><span class=n>toUnixTimestamp</span><span class=p>(</span><span class=k>timestamp</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mi>3600</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>3600</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>timestampHour</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=err>{</span><span class=k>DATABASE</span><span class=err>}</span><span class=p>.</span><span class=n>my_data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>toDate</span><span class=p>(</span><span class=k>timestamp</span><span class=p>)</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=s1>&#39;2022-01-01&#39;</span><span class=w> </span><span class=c1>-- –ó–∞–º–µ–Ω–∏—Ç—å
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=k>AND</span><span class=w> </span><span class=n>toDate</span><span class=p>(</span><span class=k>timestamp</span><span class=p>)</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=s1>&#39;2022-01-05&#39;</span><span class=w> </span><span class=c1>-- –ó–∞–º–µ–Ω–∏—Ç—å
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>user_id</span><span class=p>,</span><span class=w> </span><span class=n>timestampHour</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 2022-01-05 - 2022-01-10
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>INSERT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>INTO</span><span class=w> </span><span class=err>{</span><span class=k>DATABASE</span><span class=err>}</span><span class=p>.</span><span class=n>aggregating_my_data_3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>user_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=p>,</span><span class=w> </span><span class=n>sumState</span><span class=p>(</span><span class=n>download</span><span class=p>)</span><span class=w>                                            </span><span class=k>AS</span><span class=w> </span><span class=n>download</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=p>,</span><span class=w> </span><span class=n>sumState</span><span class=p>(</span><span class=n>upload</span><span class=p>)</span><span class=w>                                              </span><span class=k>AS</span><span class=w> </span><span class=n>upload</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=p>,</span><span class=w> </span><span class=n>toDateTime</span><span class=p>(</span><span class=n>toInt64</span><span class=p>(</span><span class=n>toUnixTimestamp</span><span class=p>(</span><span class=k>timestamp</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mi>3600</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>3600</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>timestampHour</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=err>{</span><span class=k>DATABASE</span><span class=err>}</span><span class=p>.</span><span class=n>my_data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>toDate</span><span class=p>(</span><span class=k>timestamp</span><span class=p>)</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=s1>&#39;2022-01-05&#39;</span><span class=w> </span><span class=c1>-- –ó–∞–º–µ–Ω–∏—Ç—å
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=k>AND</span><span class=w> </span><span class=n>toDate</span><span class=p>(</span><span class=k>timestamp</span><span class=p>)</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=s1>&#39;2022-01-10&#39;</span><span class=w> </span><span class=c1>-- –ó–∞–º–µ–Ω–∏—Ç—å
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>user_id</span><span class=p>,</span><span class=w> </span><span class=n>timestampHour</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 2022-01-10 - 2022-01-15
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>INSERT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>INTO</span><span class=w> </span><span class=err>{</span><span class=k>DATABASE</span><span class=err>}</span><span class=p>.</span><span class=n>aggregating_my_data_3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>user_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=p>,</span><span class=w> </span><span class=n>sumState</span><span class=p>(</span><span class=n>download</span><span class=p>)</span><span class=w>                                            </span><span class=k>AS</span><span class=w> </span><span class=n>download</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=p>,</span><span class=w> </span><span class=n>sumState</span><span class=p>(</span><span class=n>upload</span><span class=p>)</span><span class=w>                                              </span><span class=k>AS</span><span class=w> </span><span class=n>upload</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=p>,</span><span class=w> </span><span class=n>toDateTime</span><span class=p>(</span><span class=n>toInt64</span><span class=p>(</span><span class=n>toUnixTimestamp</span><span class=p>(</span><span class=k>timestamp</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mi>3600</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>3600</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>timestampHour</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=err>{</span><span class=k>DATABASE</span><span class=err>}</span><span class=p>.</span><span class=n>my_data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>toDate</span><span class=p>(</span><span class=k>timestamp</span><span class=p>)</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=s1>&#39;2022-01-10&#39;</span><span class=w> </span><span class=c1>-- –ó–∞–º–µ–Ω–∏—Ç—å
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=k>AND</span><span class=w> </span><span class=n>toDate</span><span class=p>(</span><span class=k>timestamp</span><span class=p>)</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=s1>&#39;2022-01-15&#39;</span><span class=w> </span><span class=c1>-- –ó–∞–º–µ–Ω–∏—Ç—å
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>user_id</span><span class=p>,</span><span class=w> </span><span class=n>timestampHour</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- –ò —Ç–∞–∫ –¥–∞–ª–µ–µ...</span></span></span></code></pre></div></div><p>–¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏, –≤ –∫–æ—Ç–æ—Ä–æ–π –æ—Ç–ª–∏—á–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–∞—Ç—ã.</p><p>–ï—Å–ª–∏ –≤—ã —Ä–µ—à–∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∞–≥—Ä–µ–≥–∞—Ü–∏—é –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü—É (—á—Ç–æ —è –±—ã –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–ª), —Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —É—Å–ª–æ–≤–∏–µ –î–û –¥–∞—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä:</p><div class=code-block><div class=lang-name>ClickHouse</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>WHERE</span><span class=w> </span><span class=k>timestamp</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=s1>&#39;2022-01-01 13:14:15&#39;</span></span></span></code></pre></div></div><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://clickhouse.com/docs/ru/engines/table-engines/mergetree-family/replication/#vosstanovlenie-v-sluchae-poteri-ili-povrezhdeniia-metadannykh-na-zookeeper-klastere class=external-link target=_blank rel="external noopener">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ —Å–ª—É—á–∞–µ –ø–æ—Ç–µ—Ä–∏ –∏–ª–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –Ω–∞ ZooKeeper –∫–ª–∞—Å—Ç–µ—Ä–µ | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ClickHouse</a>
&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://clickhouse.com/docs/ru/sql-reference/statements/system/#query_language-system-restore-replica class=external-link target=_blank rel="external noopener">SYSTEM RESTORE REPLICA | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ClickHouse</a>
&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><div class=post-tags><a href=/ru/tags/clickhouse/>#clickhouse</a></div><footer><div class=comments><script>let getTheme=window.localStorage&&window.localStorage.getItem("colorscheme");getTheme=getTheme??"";let s=document.createElement("script");s.src="https://giscus.app/client.js",s.setAttribute("data-repo","ghostiam/ghostiam-blog-comments"),s.setAttribute("data-repo-id","MDEwOlJlcG9zaXRvcnkyODI3MjU5MzI="),s.setAttribute("data-category","Announcements"),s.setAttribute("data-category-id","DIC_kwDOENoOLM4CdxhZ"),s.setAttribute("data-mapping","pathname"),s.setAttribute("data-strict","0"),s.setAttribute("data-reactions-enabled","1"),s.setAttribute("data-emit-metadata","0"),s.setAttribute("data-input-position","bottom"),s.setAttribute("data-theme",getTheme),s.setAttribute("data-lang","ru"),s.setAttribute("data-loading",""),s.setAttribute("crossorigin","anonymous"),s.setAttribute("async",""),document.querySelector("div.comments").innerHTML="",document.querySelector("div.comments").appendChild(s)</script></div></footer></article></section></div><footer class=footer><section class=container>¬©
2020 -
2025
GhostIAm (Vladislav Fursov)
¬∑
–†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.<br>–≠—Ç–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –ª–∏—Ü–µ–Ω–∑–∏–∏ <a class=theme-link rel=license href=http://creativecommons.org/licenses/by/4.0/>Creative Commons Attribution 4.0 International License</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script><script src=/js/custom.min.82aadaf649133639d24e9f2aefc6749704469783302b6b1db02b9a814aed35f4.js integrity="sha256-gqra9kkTNjnSTp8q78Z0lwRGl4MwK2sdsCuagUrtNfQ="></script><script src=/js/count.min.03fc03205b8079652971402407382f0f1557a5cacab4c54eaad00b14be58a2d8.js data-goatcounter=https://stats.ghostiam.dev/count async integrity="sha256-A/wDIFuAeWUpcUAkBzgvDxVXpcrKtMVOqtALFL5Yotg="></script></body></html>