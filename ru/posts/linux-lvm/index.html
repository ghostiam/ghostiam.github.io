<!doctype html><html lang=ru><head><title>–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º LVM, –∏—Å–ø–æ–ª—å–∑—É–µ–º LVM RAID 1, —Ç–µ—Å—Ç–∏—Ä—É–µ–º ¬∑ GhostIAm –ë–ª–æ–≥
</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="GhostIAm (Vladislav Fursov)"><meta name=description content="
  –ü—Ä–µ–¥–∏—Å–ª–æ–≤–∏–µ
  
    
    –°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫
  

–í–æ—Ç –∏ –ø—Ä–∏—à–ª–∞ –ø–æ—Ä–∞ —É–≤–µ–ª–∏—á–∏—Ç—å –º–µ—Å—Ç–æ –Ω–∞ —Å–≤–æ—ë–º –¥–æ–º–∞—à–Ω–µ–º —Å–µ—Ä–≤–µ—Ä–µ, –¥–ª—è —ç—Ç–æ–≥–æ –±—ã–ª–æ –∫—É–ø–ª–µ–Ω–æ 2 –¥–∏—Å–∫–∞ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π, –Ω–æ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–≥–æ –æ–±—ä—ë–º–∞.
–ó–∞—Ö–æ—Ç–µ–ª–æ—Å—å —Å–¥–µ–ª–∞—Ç—å soft RAID1, –Ω–æ –º–Ω–µ –Ω–µ –æ—á–µ–Ω—å –ø–æ–¥—Ö–æ–¥–∏—Ç mdadm, —Ç–∞–∫ –∫–∞–∫ —è —Ö–æ—á—É –∏–º–µ—Ç—å –±–æ–ª–µ–µ –≥–∏–±–∫–æ–µ –∑–µ—Ä–∫–∞–ª–æ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –≤ –±—É–¥—É—â–µ–º, –∞ –Ω–µ –≤—ã–¥–µ–ª—è—Ç—å —Å—Ä–∞–∑—É –±–æ–ª—å—à–æ–π –æ–±—ä—ë–º.
–†–µ—à–∏–ª –ø–æ–ø—ã—Ç–∞—Ç—å —Å—á–∞—Å—Ç—å—è —Å LVM RAID, –Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ –Ω–µ–º—É, –≤ —Å–∂–∞—Ç–æ–º –≤–∏–¥–µ, –º–∞–ª–æ, –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –≤—Å—ë –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç –Ω–∞ —Ç–æ–º, –∫–∞–∫ –µ–≥–æ —Å–æ–∑–¥–∞—Ç—å. –ü–æ–ø—Ä–æ–±—É—é –∏—Å–ø—Ä–∞–≤–∏—Ç—å —ç—Ç–æ—Ç –ø—Ä–æ–±–µ–ª.

  –ú–æ–∏ –¥–∏—Å–∫–∏

"><meta name=keywords content="linux,lvm,lvm2,raid,raid1,mirror"><meta name=twitter:card content="summary"><meta name=twitter:title content="–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º LVM, –∏—Å–ø–æ–ª—å–∑—É–µ–º LVM RAID 1, —Ç–µ—Å—Ç–∏—Ä—É–µ–º"><meta name=twitter:description content="–ü—Ä–µ–¥–∏—Å–ª–æ–≤–∏–µ –°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –í–æ—Ç –∏ –ø—Ä–∏—à–ª–∞ –ø–æ—Ä–∞ —É–≤–µ–ª–∏—á–∏—Ç—å –º–µ—Å—Ç–æ –Ω–∞ —Å–≤–æ—ë–º –¥–æ–º–∞—à–Ω–µ–º —Å–µ—Ä–≤–µ—Ä–µ, –¥–ª—è —ç—Ç–æ–≥–æ –±—ã–ª–æ –∫—É–ø–ª–µ–Ω–æ 2 –¥–∏—Å–∫–∞ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π, –Ω–æ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–≥–æ –æ–±—ä—ë–º–∞.
–ó–∞—Ö–æ—Ç–µ–ª–æ—Å—å —Å–¥–µ–ª–∞—Ç—å soft RAID1, –Ω–æ –º–Ω–µ –Ω–µ –æ—á–µ–Ω—å –ø–æ–¥—Ö–æ–¥–∏—Ç mdadm, —Ç–∞–∫ –∫–∞–∫ —è —Ö–æ—á—É –∏–º–µ—Ç—å –±–æ–ª–µ–µ –≥–∏–±–∫–æ–µ –∑–µ—Ä–∫–∞–ª–æ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –≤ –±—É–¥—É—â–µ–º, –∞ –Ω–µ –≤—ã–¥–µ–ª—è—Ç—å —Å—Ä–∞–∑—É –±–æ–ª—å—à–æ–π –æ–±—ä—ë–º.
–†–µ—à–∏–ª –ø–æ–ø—ã—Ç–∞—Ç—å —Å—á–∞—Å—Ç—å—è —Å LVM RAID, –Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ –Ω–µ–º—É, –≤ —Å–∂–∞—Ç–æ–º –≤–∏–¥–µ, –º–∞–ª–æ, –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –≤—Å—ë –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç –Ω–∞ —Ç–æ–º, –∫–∞–∫ –µ–≥–æ —Å–æ–∑–¥–∞—Ç—å. –ü–æ–ø—Ä–æ–±—É—é –∏—Å–ø—Ä–∞–≤–∏—Ç—å —ç—Ç–æ—Ç –ø—Ä–æ–±–µ–ª.
–ú–æ–∏ –¥–∏—Å–∫–∏"><meta property="og:url" content="https://ghostiam.dev/ru/posts/linux-lvm/"><meta property="og:site_name" content="GhostIAm –ë–ª–æ–≥"><meta property="og:title" content="–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º LVM, –∏—Å–ø–æ–ª—å–∑—É–µ–º LVM RAID 1, —Ç–µ—Å—Ç–∏—Ä—É–µ–º"><meta property="og:description" content="–ü—Ä–µ–¥–∏—Å–ª–æ–≤–∏–µ –°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –í–æ—Ç –∏ –ø—Ä–∏—à–ª–∞ –ø–æ—Ä–∞ —É–≤–µ–ª–∏—á–∏—Ç—å –º–µ—Å—Ç–æ –Ω–∞ —Å–≤–æ—ë–º –¥–æ–º–∞—à–Ω–µ–º —Å–µ—Ä–≤–µ—Ä–µ, –¥–ª—è —ç—Ç–æ–≥–æ –±—ã–ª–æ –∫—É–ø–ª–µ–Ω–æ 2 –¥–∏—Å–∫–∞ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π, –Ω–æ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–≥–æ –æ–±—ä—ë–º–∞.
–ó–∞—Ö–æ—Ç–µ–ª–æ—Å—å —Å–¥–µ–ª–∞—Ç—å soft RAID1, –Ω–æ –º–Ω–µ –Ω–µ –æ—á–µ–Ω—å –ø–æ–¥—Ö–æ–¥–∏—Ç mdadm, —Ç–∞–∫ –∫–∞–∫ —è —Ö–æ—á—É –∏–º–µ—Ç—å –±–æ–ª–µ–µ –≥–∏–±–∫–æ–µ –∑–µ—Ä–∫–∞–ª–æ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –≤ –±—É–¥—É—â–µ–º, –∞ –Ω–µ –≤—ã–¥–µ–ª—è—Ç—å —Å—Ä–∞–∑—É –±–æ–ª—å—à–æ–π –æ–±—ä—ë–º.
–†–µ—à–∏–ª –ø–æ–ø—ã—Ç–∞—Ç—å —Å—á–∞—Å—Ç—å—è —Å LVM RAID, –Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ –Ω–µ–º—É, –≤ —Å–∂–∞—Ç–æ–º –≤–∏–¥–µ, –º–∞–ª–æ, –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –≤—Å—ë –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç –Ω–∞ —Ç–æ–º, –∫–∞–∫ –µ–≥–æ —Å–æ–∑–¥–∞—Ç—å. –ü–æ–ø—Ä–æ–±—É—é –∏—Å–ø—Ä–∞–≤–∏—Ç—å —ç—Ç–æ—Ç –ø—Ä–æ–±–µ–ª.
–ú–æ–∏ –¥–∏—Å–∫–∏"><meta property="og:locale" content="ru_RU"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-11-25T05:30:00+09:00"><meta property="article:modified_time" content="2020-11-25T05:30:00+09:00"><meta property="article:tag" content="Linux"><meta property="article:tag" content="Lvm"><meta property="article:tag" content="Raid"><link rel=canonical href=https://ghostiam.dev/ru/posts/linux-lvm/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.7763f8bc6341ecf82378e867c285e1549abb063a899be313ccd25dbfcd24fa7d.css integrity="sha256-d2P4vGNB7PgjeOhnwoXhVJq7BjqJm+MTzNJdv80k+n0=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/custom.min.4bc2042b31fe8b2ae37ea83d26d9bbebe37a341c1096ff072589efe1dd57d56c.css integrity="sha256-S8IEKzH+iyrjfqg9Jtm76+N6NBwQlv8HJYnv4d1X1Ww=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-dark"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://ghostiam.dev/ru/>GhostIAm –ë–ª–æ–≥
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/ru/>–û–±–æ –º–Ω–µ</a></li><li class=navigation-item><a class=navigation-link href=/ru/posts/>–°—Ç–∞—Ç—å–∏</a></li><li class=navigation-item><a class=navigation-link href=/ru/tags/>–¢–µ–≥–∏</a></li><li class=navigation-item><a class=navigation-link href=/ru/categories/>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class=navigation-item><a href=/en/>English üá¨üáß</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://ghostiam.dev/ru/posts/linux-lvm/>–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º LVM, –∏—Å–ø–æ–ª—å–∑—É–µ–º LVM RAID 1, —Ç–µ—Å—Ç–∏—Ä—É–µ–º</a></h1></div><div class=post-meta><div class=date><span class=posted-on title="–î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ 2020-11-25"><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=2020-11-25T05:30:00+09:00>2020-11-25
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
–ß–∏—Ç–∞—Ç—å –æ–∫–æ–ª–æ 6 –º–∏–Ω—É—Ç</span></div><div class=date></div><div class=categories><i class="fa-solid fa-folder" aria-hidden=true></i>
<a href=/ru/categories/linux/>Linux</a></div></div></header><details class=toc><summary>–û–≥–ª–∞–≤–ª–µ–Ω–∏–µ</summary><nav class=inner><nav id=TableOfContents><ul><li><a href=#–ø—Ä–µ–¥–∏—Å–ª–æ–≤–∏–µ>–ü—Ä–µ–¥–∏—Å–ª–æ–≤–∏–µ</a></li><li><a href=#lvm>LVM</a><ul><li><a href=#–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è>–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è</a></li><li><a href=#–ø—Ä–æ—Å—Ç–æ–π-–ª–æ–≥–∏—á–µ—Å–∫–∏–π-–¥–∏—Å–∫>–ü—Ä–æ—Å—Ç–æ–π –ª–æ–≥–∏—á–µ—Å–∫–∏–π –¥–∏—Å–∫</a></li><li><a href=#raid-1-mirror>RAID 1 (mirror)</a></li><li><a href=#—Å–º–æ—Ç—Ä–∏–º-—á—Ç–æ-–ø–æ–ª—É—á–∏–ª–æ—Å—å>–°–º–æ—Ç—Ä–∏–º —á—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å</a></li><li><a href=#fs>FS</a></li></ul></li><li><a href=#—Ç–µ—Å—Ç–∏—Ä—É–µ–º-lvm-raid-1-–∏-—É—á–∏–º—Å—è-—á–∏–Ω–∏—Ç—å>–¢–µ—Å—Ç–∏—Ä—É–µ–º LVM RAID 1 –∏ —É—á–∏–º—Å—è —á–∏–Ω–∏—Ç—å</a><ul><li><a href=#–æ—Ç–≤–∞–ª-–¥–∏—Å–∫–∞-—Ä–µ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è-–∏-–µ–≥–æ-–∑–∞–º–µ–Ω–∞>–û—Ç–≤–∞–ª –¥–∏—Å–∫–∞ (—Ä–µ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è) –∏ –µ–≥–æ –∑–∞–º–µ–Ω–∞</a><ul><li><a href=#—á–∏–Ω–∏–º>–ß–∏–Ω–∏–º</a></li></ul></li><li><a href=#–∑–∞–º–µ–Ω–∞-–º—ë—Ä—Ç–≤–æ–≥–æ-–¥–∏—Å–∫–∞>–ó–∞–º–µ–Ω–∞ –º—ë—Ä—Ç–≤–æ–≥–æ –¥–∏—Å–∫–∞</a><ul><li><a href=#—á–∏–Ω–∏–º-1>–ß–∏–Ω–∏–º</a></li></ul></li><li><a href=#–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º-–ª–æ–≥–∏—á–µ—Å–∫–∏–π-–¥–∏—Å–∫-–∏–∑-raid-1-–≤-–æ–±—ã—á–Ω—ã–π>–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –ª–æ–≥–∏—á–µ—Å–∫–∏–π –¥–∏—Å–∫ –∏–∑ RAID 1 –≤ –æ–±—ã—á–Ω—ã–π</a></li><li><a href=#–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º-–ª–æ–≥–∏—á–µ—Å–∫–∏–π-–¥–∏—Å–∫-–∏–∑-–æ–±—ã—á–Ω–æ–≥–æ-–≤-raid-1>–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –ª–æ–≥–∏—á–µ—Å–∫–∏–π –¥–∏—Å–∫ –∏–∑ –æ–±—ã—á–Ω–æ–≥–æ –≤ RAID 1</a></li><li><a href=#—É–≤–µ–ª–∏—á–∏–≤–∞–µ–º-—Ä–∞–∑–º–µ—Ä-–¥–∏—Å–∫–∞-—Å-–∑–µ—Ä–∫–∞–ª–æ–º>–£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä –¥–∏—Å–∫–∞ —Å –∑–µ—Ä–∫–∞–ª–æ–º</a></li><li><a href=#—É–º–µ–Ω—å—à–∞–µ–º-—Ä–∞–∑–º–µ—Ä-–¥–∏—Å–∫–∞-—Å-–∑–µ—Ä–∫–∞–ª–æ–º>–£–º–µ–Ω—å—à–∞–µ–º —Ä–∞–∑–º–µ—Ä –¥–∏—Å–∫–∞ —Å –∑–µ—Ä–∫–∞–ª–æ–º</a></li></ul></li><li><a href=#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</a></li><li><a href=#–∫–∞–∫-—è-–≤—Å—ë-—Å–ª–æ–º–∞–ª>–ö–∞–∫ —è –≤—Å—ë —Å–ª–æ–º–∞–ª</a><ul><li><a href=#inconsistent-metadata>Inconsistent metadata</a></li></ul></li></ul></nav></nav></details><div class=post-content><h2 id=–ø—Ä–µ–¥–∏—Å–ª–æ–≤–∏–µ>–ü—Ä–µ–¥–∏—Å–ª–æ–≤–∏–µ
<a class=heading-link href=#%d0%bf%d1%80%d0%b5%d0%b4%d0%b8%d1%81%d0%bb%d0%be%d0%b2%d0%b8%d0%b5><i class="fa-solid fa-link" aria-hidden=true title="–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫"></i>
<span class=sr-only>–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫</span></a></h2><p>–í–æ—Ç –∏ –ø—Ä–∏—à–ª–∞ –ø–æ—Ä–∞ —É–≤–µ–ª–∏—á–∏—Ç—å –º–µ—Å—Ç–æ –Ω–∞ —Å–≤–æ—ë–º –¥–æ–º–∞—à–Ω–µ–º —Å–µ—Ä–≤–µ—Ä–µ, –¥–ª—è —ç—Ç–æ–≥–æ –±—ã–ª–æ –∫—É–ø–ª–µ–Ω–æ 2 –¥–∏—Å–∫–∞ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π, –Ω–æ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–≥–æ –æ–±—ä—ë–º–∞.<br>–ó–∞—Ö–æ—Ç–µ–ª–æ—Å—å —Å–¥–µ–ª–∞—Ç—å soft RAID1, –Ω–æ –º–Ω–µ –Ω–µ –æ—á–µ–Ω—å –ø–æ–¥—Ö–æ–¥–∏—Ç mdadm, —Ç–∞–∫ –∫–∞–∫ —è —Ö–æ—á—É –∏–º–µ—Ç—å –±–æ–ª–µ–µ –≥–∏–±–∫–æ–µ –∑–µ—Ä–∫–∞–ª–æ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –≤ –±—É–¥—É—â–µ–º, –∞ –Ω–µ –≤—ã–¥–µ–ª—è—Ç—å —Å—Ä–∞–∑—É –±–æ–ª—å—à–æ–π –æ–±—ä—ë–º.<br>–†–µ—à–∏–ª –ø–æ–ø—ã—Ç–∞—Ç—å —Å—á–∞—Å—Ç—å—è —Å LVM RAID, –Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ –Ω–µ–º—É, –≤ —Å–∂–∞—Ç–æ–º –≤–∏–¥–µ, –º–∞–ª–æ, –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –≤—Å—ë –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç –Ω–∞ —Ç–æ–º, –∫–∞–∫ –µ–≥–æ —Å–æ–∑–¥–∞—Ç—å. –ü–æ–ø—Ä–æ–±—É—é –∏—Å–ø—Ä–∞–≤–∏—Ç—å —ç—Ç–æ—Ç –ø—Ä–æ–±–µ–ª.</p><figure><img src=/ru/posts/linux-lvm/image_hu_418fe2bb12b2f865.webp alt="–ú–æ–∏ –¥–∏—Å–∫–∏"><figcaption><p>–ú–æ–∏ –¥–∏—Å–∫–∏</p></figcaption></figure><h2 id=lvm>LVM
<a class=heading-link href=#lvm><i class="fa-solid fa-link" aria-hidden=true title="–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫"></i>
<span class=sr-only>–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫</span></a></h2><p>–ù–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è 2 –¥–∏—Å–∫–∞, –µ—Å–ª–∏ –≤—ã —Å–æ–±–∏—Ä–∞–µ—Ç–µ—Å—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å RAID, –µ—Å–ª–∏ –Ω–µ—Ç, —Ç–æ –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–ø—É—Å–∫–∞–π—Ç–µ —á–∞—Å—Ç–∏ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –≤—Ç–æ—Ä–æ–≥–æ –¥–∏—Å–∫–∞.</p><p>–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏–º–µ—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–µ –¥–∏—Å–∫–∏, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—ã—á–Ω—ã–µ —Ñ–∞–π–ª—ã: <a href=https://www.thegeekdiary.com/how-to-create-virtual-block-device-loop-device-filesystem-in-linux/ class=external-link target=_blank rel="external noopener">How to create virtual block device (loop device/filesystem) in Linux</a></p><div class="notice note"><div class=notice-title><i class="fa-solid fa-sticky-note" aria-hidden=true></i>–ó–∞–º–µ—Ç–∫–∞</div><div class=notice-content>–ò–º–µ–Ω–∞ –¥–∏—Å–∫–æ–≤ –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ <code>sdX, sdY, sdZ</code>, –≤–æ –∏–∑–±–µ–∂–∞–Ω–∏–µ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –Ω–æ—Å–∏—Ç–µ–ª—è—Ö.</div></div><h3 id=–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è>–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
<a class=heading-link href=#%d0%b8%d0%bd%d0%b8%d1%86%d0%b8%d0%b0%d0%bb%d0%b8%d0%b7%d0%b0%d1%86%d0%b8%d1%8f><i class="fa-solid fa-link" aria-hidden=true title="–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫"></i>
<span class=sr-only>–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫</span></a></h3><p>–ö–∞–∑–∞–ª–æ—Å—å –±—ã, —Å–¥–µ–ª–∞–ª <code>pvcreate</code> –Ω–∞–¥ –¥–∏—Å–∫–æ–º –∏ –≥–æ—Ç–æ–≤–æ, –Ω–æ –Ω–µ —Ç—É—Ç —Ç–æ –±—ã–ª–æ&mldr;<br>–°–æ–≥–ª–∞—Å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> <sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>, —Å—Ç–æ–∏—Ç –≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª—ã –Ω–∞ –¥–∏—Å–∫–µ, –≤–æ –∏–∑–±–µ–∂–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å —Å–æ—Ñ—Ç–æ–º, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –∑–Ω–∞–µ—Ç –æ–± LVM –∏ –±—É–¥–µ—Ç —Å—á–∏—Ç–∞—Ç—å –¥–∏—Å–∫ –ø—É—Å—Ç—ã–º.</p><p>–î–ª—è —Ä–∞–∑–±–∏–≤–∫–∏ –¥–∏—Å–∫–∞ —è –±—É–¥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å <code>gdisk</code>, –æ–±—ã—á–Ω–æ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –Ω–æ –µ—Å–ª–∏ —á—Ç–æ, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π:</p><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>apt install gdisk</span></span></code></pre></div></div><div class="notice warning"><div class=notice-title><i class="fa-solid fa-exclamation-triangle" aria-hidden=true></i>–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ</div><div class=notice-content>–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –≤–µ—Ä–Ω—ã–π –¥–∏—Å–∫ –≤ –∫–æ–º–∞–Ω–¥–∞—Ö, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ —É–Ω–∏—á—Ç–æ–∂–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –¥–∏—Å–∫–µ!</div></div><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gdisk /dev/sdX</span></span></code></pre></div></div><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># –°–º–æ—Ç—Ä–∏–º —Ä–∞–∑–¥–µ–ª—ã –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º, —Ç–æ—Ç –ª–∏ –º—ã –¥–∏—Å–∫ –≤—ã–±—Ä–∞–ª–∏.</span>
</span></span><span class=line><span class=cl>p
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># –°–æ–∑–¥–∞—ë–º –ø—É—Å—Ç—É—é GUID partition table.</span>
</span></span><span class=line><span class=cl>o <span class=c1># –∂–º—ë–º `y`, —á—Ç–æ–±—ã —É–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ä–∞–∑–¥–µ–ª—ã –∏ —Å–æ–∑–¥–∞—Ç—å GPT –∑–∞–ø–∏—Å—å.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># –°–æ–∑–¥–∞—ë–º –ø–µ—Ä–≤—ã–π –∏ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–∞–∑–¥–µ–ª –Ω–∞ –≤–µ—Å—å –¥–∏—Å–∫.</span>
</span></span><span class=line><span class=cl>n
</span></span><span class=line><span class=cl><span class=m>1</span>
</span></span><span class=line><span class=cl>&lt;enter&gt;
</span></span><span class=line><span class=cl>&lt;enter&gt;
</span></span><span class=line><span class=cl>8e00 <span class=c1># –£–∫–∞–∑—ã–≤–∞–µ–º, —á—Ç–æ –¥–∞–Ω–Ω—ã–π —Ä–∞–∑–¥–µ–ª –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ LVM.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–æ, —á—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å.</span>
</span></span><span class=line><span class=cl>p
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># –ï—Å–ª–∏ –≤—Å—ë —É—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç, —Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å –∑–∞–ø–∏—Å–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ –¥–∏—Å–∫.</span>
</span></span><span class=line><span class=cl>w <span class=c1># –∂–º—ë–º `y`, —á—Ç–æ–±—ã –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–ø–∏—Å—å.</span></span></span></code></pre></div></div><p>–ø—Ä–æ–¥–µ–ª—ã–≤–∞–µ–º —Ç–æ –∂–µ —Å–∞–º–æ–µ —Å–æ –≤—Ç–æ—Ä—ã–º –¥–∏—Å–∫–æ–º.</p><p>–î–æ–±–∞–≤–ª—è–µ–º –¥–∏—Å–∫–∏ –≤ LVM</p><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pvcreate /dev/sdX1 /dev/sdY1
</span></span><span class=line><span class=cl><span class=c1># –∏–ª–∏ –∫–æ—Ä–æ—Ç–∫–æ</span>
</span></span><span class=line><span class=cl>pvcreate /dev/sd<span class=o>[</span>XY<span class=o>]</span><span class=m>1</span></span></span></code></pre></div></div><p>–°–æ–∑–¥–∞—ë–º –≥—Ä—É–ø–ø—É <code>vgdata</code> –∏–∑ –¥–≤—É—Ö –¥–∏—Å–∫–æ–≤</p><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vgcreate vgdata /dev/sdX1 /dev/sdY1
</span></span><span class=line><span class=cl><span class=c1># –∏–ª–∏ –∫–æ—Ä–æ—Ç–∫–æ</span>
</span></span><span class=line><span class=cl>vgcreate vgdata /dev/sd<span class=o>[</span>XY<span class=o>]</span><span class=m>1</span></span></span></code></pre></div></div><h3 id=–ø—Ä–æ—Å—Ç–æ–π-–ª–æ–≥–∏—á–µ—Å–∫–∏–π-–¥–∏—Å–∫>–ü—Ä–æ—Å—Ç–æ–π –ª–æ–≥–∏—á–µ—Å–∫–∏–π –¥–∏—Å–∫
<a class=heading-link href=#%d0%bf%d1%80%d0%be%d1%81%d1%82%d0%be%d0%b9-%d0%bb%d0%be%d0%b3%d0%b8%d1%87%d0%b5%d1%81%d0%ba%d0%b8%d0%b9-%d0%b4%d0%b8%d1%81%d0%ba><i class="fa-solid fa-link" aria-hidden=true title="–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫"></i>
<span class=sr-only>–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫</span></a></h3><p>–°–æ–∑–¥–∞—ë–º –ø—Ä–æ—Å—Ç–æ–π –ª–æ–≥–∏—á–µ—Å–∫–∏–π –¥–∏—Å–∫ —Å –∏–º–µ–Ω–µ–º <code>lv0</code> –Ω–∞ 3–ì–ë:</p><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lvcreate --size 3G --name lv0 vgdata
</span></span><span class=line><span class=cl><span class=c1># –∏–ª–∏ –∫–æ—Ä–æ—Ç–∫–æ</span>
</span></span><span class=line><span class=cl>lvcreate -L 3G -n lv0 vgdata</span></span></code></pre></div></div><h3 id=raid-1-mirror>RAID 1 (mirror)
<a class=heading-link href=#raid-1-mirror><i class="fa-solid fa-link" aria-hidden=true title="–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫"></i>
<span class=sr-only>–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫</span></a></h3><p>–°–æ–∑–¥–∞—ë–º –ª–æ–≥–∏—á–µ—Å–∫–∏–π –¥–∏—Å–∫ —Å RAID 1 –ø–æ–¥ –∏–º–µ–Ω–µ–º <code>lvmirror</code> –Ω–∞ 3–ì–ë:</p><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lvcreate --size 3G --name lvmirror --mirrors <span class=m>1</span> vgdata
</span></span><span class=line><span class=cl><span class=c1># –∏–ª–∏ –∫–æ—Ä–æ—Ç–∫–æ</span>
</span></span><span class=line><span class=cl>lvcreate -L 3G -n lvmirror -m1 vgdata</span></span></code></pre></div></div><p>–º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Ñ–ª–∞–≥ <code>--nosync</code>, —á—Ç–æ–±—ã –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –ø—É—Å—Ç–æ–≥–æ –∑–µ—Ä–∫–∞–ª–∞.</p><h3 id=—Å–º–æ—Ç—Ä–∏–º-—á—Ç–æ-–ø–æ–ª—É—á–∏–ª–æ—Å—å>–°–º–æ—Ç—Ä–∏–º —á—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å
<a class=heading-link href=#%d1%81%d0%bc%d0%be%d1%82%d1%80%d0%b8%d0%bc-%d1%87%d1%82%d0%be-%d0%bf%d0%be%d0%bb%d1%83%d1%87%d0%b8%d0%bb%d0%be%d1%81%d1%8c><i class="fa-solid fa-link" aria-hidden=true title="–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫"></i>
<span class=sr-only>–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫</span></a></h3><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lvs -a -o +devices</span></span></code></pre></div></div><p>–ö–æ–ª–æ–Ω–∫–∞ <code>Cpy%Sync</code> –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –ø—Ä–æ—Ü–µ–Ω—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, –∞ <code>Devices</code>, —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –Ω–∞—Ö–æ–¥—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –¥–∏—Å–∫–∞.</p><h3 id=fs>FS
<a class=heading-link href=#fs><i class="fa-solid fa-link" aria-hidden=true title="–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫"></i>
<span class=sr-only>–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫</span></a></h3><p>–û—Å—Ç–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É:</p><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkfs.ext4 /dev/vgdata/lvmirror</span></span></code></pre></div></div><p>–ò –º–æ–∂–Ω–æ –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è</p><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mount /dev/vgdata/lvmirror /mnt/</span></span></code></pre></div></div><h2 id=—Ç–µ—Å—Ç–∏—Ä—É–µ–º-lvm-raid-1-–∏-—É—á–∏–º—Å—è-—á–∏–Ω–∏—Ç—å>–¢–µ—Å—Ç–∏—Ä—É–µ–º LVM RAID 1 –∏ —É—á–∏–º—Å—è —á–∏–Ω–∏—Ç—å
<a class=heading-link href=#%d1%82%d0%b5%d1%81%d1%82%d0%b8%d1%80%d1%83%d0%b5%d0%bc-lvm-raid-1-%d0%b8-%d1%83%d1%87%d0%b8%d0%bc%d1%81%d1%8f-%d1%87%d0%b8%d0%bd%d0%b8%d1%82%d1%8c><i class="fa-solid fa-link" aria-hidden=true title="–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫"></i>
<span class=sr-only>–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫</span></a></h2><p>–ö–∞–∫ –º–æ–∂–Ω–æ –¥–æ–≤–µ—Ä—è—Ç—å —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, –∫–æ–≥–¥–∞ —Ç—ã –Ω–µ –∑–Ω–∞–µ—à—å, —á—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –≤ —Å–ª—É—á–∞–µ –Ω–µ—à—Ç–∞—Ç–Ω–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏ –∏ –∫–∞–∫ –≤—Å—ë –ø–æ—á–∏–Ω–∏—Ç—å –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö.</p><p>–î–ª—è –Ω–∞—á–∞–ª–∞, –ø–æ—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ —É –Ω–∞—Å –≤—Å—ë –≤—ã–≥–ª—è–¥–∏—Ç –¥–æ –Ω–∞—á–∞–ª–∞ —Ç–µ—Å—Ç–æ–≤:</p><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lvs -a -o +devices,lv_health_status</span></span></code></pre></div></div><div class=code-block><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>LV                  VG     Attr       LSize Cpy%Sync Devices                                   Health
</span></span><span class=line><span class=cl>lvmirror            vgdata rwi-aor--- 3.00g 100.00   lvmirror_rimage_0(0),lvmirror_rimage_1(0)
</span></span><span class=line><span class=cl>[lvmirror_rimage_0] vgdata iwi-aor--- 3.00g          /dev/sdX1(1)
</span></span><span class=line><span class=cl>[lvmirror_rimage_1] vgdata iwi-aor--- 3.00g          /dev/sdY1(1)
</span></span><span class=line><span class=cl>[lvmirror_rmeta_0]  vgdata ewi-aor--- 4.00m          /dev/sdX1(0)
</span></span><span class=line><span class=cl>[lvmirror_rmeta_1]  vgdata ewi-aor--- 4.00m          /dev/sdY1(0)</span></span></code></pre></div></div><p>–¢–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º –ø—Ä–∏—Å—Ç—É–ø–∞—Ç—å –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é, –Ω–æ —Å–Ω–∞—á–∞–ª–∞:<div class="notice warning"><div class=notice-title><i class="fa-solid fa-exclamation-triangle" aria-hidden=true></i>–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ</div><div class=notice-content>–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –≤–µ—Ä–Ω—ã–π –¥–∏—Å–∫ –≤ –∫–æ–º–∞–Ω–¥–∞—Ö, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–æ—Ç–µ—Ä–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –¥–∏—Å–∫–µ!</div></div></p><h3 id=–æ—Ç–≤–∞–ª-–¥–∏—Å–∫–∞-—Ä–µ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è-–∏-–µ–≥–æ-–∑–∞–º–µ–Ω–∞>–û—Ç–≤–∞–ª –¥–∏—Å–∫–∞ (—Ä–µ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è) –∏ –µ–≥–æ –∑–∞–º–µ–Ω–∞
<a class=heading-link href=#%d0%be%d1%82%d0%b2%d0%b0%d0%bb-%d0%b4%d0%b8%d1%81%d0%ba%d0%b0-%d1%80%d0%b5%d1%81%d0%b8%d0%bd%d1%85%d1%80%d0%be%d0%bd%d0%b8%d0%b7%d0%b0%d1%86%d0%b8%d1%8f-%d0%b8-%d0%b5%d0%b3%d0%be-%d0%b7%d0%b0%d0%bc%d0%b5%d0%bd%d0%b0><i class="fa-solid fa-link" aria-hidden=true title="–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫"></i>
<span class=sr-only>–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫</span></a></h3><p>–í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ, –º—ã –±—É–¥–µ–º —Å–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–∞–ª –¥–∏—Å–∫–∞, —á–µ—Ä–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup></p><p>–û—Ç–∫–ª—é—á–∞–µ–º –¥–∏—Å–∫ <code>sdX</code>:</p><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> offline &gt; /sys/block/sdX/device/state</span></span></code></pre></div></div><p>–¢–µ–ø–µ—Ä—å, —á—Ç–æ–±—ã LVM –ø–æ–Ω—è–ª, —á—Ç–æ —Å –¥–∏—Å–∫–æ–º —á—Ç–æ-—Ç–æ –Ω–µ —Ç–æ, –Ω—É–∂–Ω–æ –∑–∞–ø–∏—Å–∞—Ç—å –Ω–∞ –¥–∏—Å–∫ –¥–∞–Ω–Ω—ã–µ.</p><p>–ï—Å–ª–∏ FS –µ—Å—Ç—å:</p><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=nb>test</span> &gt; /mnt/test.txt </span></span></code></pre></div></div><p>–ï—Å–ª–∏ FS –Ω–µ—Ç(<strong>—ç—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —É–Ω–∏—á—Ç–æ–∂–∏—Ç FS, –µ—Å–ª–∏ –æ–Ω–∞ –µ—Å—Ç—å!</strong>):</p><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dd <span class=k>if</span><span class=o>=</span>/dev/zero <span class=nv>of</span><span class=o>=</span>/dev/vgdata/lvmirror <span class=nv>count</span><span class=o>=</span><span class=m>10</span></span></span></code></pre></div></div><p>–°–º–æ—Ç—Ä–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</p><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lvs -a -o +devices,lv_health_status</span></span></code></pre></div></div><div class=code-block><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>/dev/sdX: open failed: No such device or address
</span></span><span class=line><span class=cl>/dev/sdX: open failed: No such device or address
</span></span><span class=line><span class=cl>/dev/sdX: open failed: No such device or address
</span></span><span class=line><span class=cl>WARNING: Couldn&#39;t find device with uuid VkIceg-2ZVd-tTuZ-HgHz-EblT-5GwQ-oH3gKM.
</span></span><span class=line><span class=cl>WARNING: VG vgdata is missing PV VkIceg-2ZVd-tTuZ-HgHz-EblT-5GwQ-oH3gKM (last written to /dev/sdX1).
</span></span><span class=line><span class=cl>WARNING: Couldn&#39;t find all devices for LV vgdata/lvmirror_rmeta_0 while checking used and assumed devices.
</span></span><span class=line><span class=cl>WARNING: Couldn&#39;t find all devices for LV vgdata/lvmirror_rimage_0 while checking used and assumed devices.
</span></span><span class=line><span class=cl>LV                  VG     Attr       LSize Cpy%Sync Devices                                   Health
</span></span><span class=line><span class=cl>lvmirror            vgdata rwi-aor-p- 3.00g 100.00   lvmirror_rimage_0(0),lvmirror_rimage_1(0) partial
</span></span><span class=line><span class=cl>[lvmirror_rimage_0] vgdata iwi-aor-p- 3.00g          [unknown](1)                              partial
</span></span><span class=line><span class=cl>[lvmirror_rimage_1] vgdata iwi-aor--- 3.00g          /dev/sdY1(1)
</span></span><span class=line><span class=cl>[lvmirror_rmeta_0]  vgdata ewi-aor-p- 4.00m          [unknown](0)                              partial
</span></span><span class=line><span class=cl>[lvmirror_rmeta_1]  vgdata ewi-aor--- 4.00m          /dev/sdY1(0)</span></span></code></pre></div></div><p>–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —Å—Ç–∞—Ç—É—Å <code>Health</code> —Å—Ç–∞–ª <code>partial</code></p><p>–¢–µ–ø–µ—Ä—å –∑–∞–ø–∏—à–µ–º —Ä–∞–Ω–¥–æ–º–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –¥–∏—Å–∫, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ —É–≤–∏–¥–µ—Ç—å —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é:</p><p>FS –µ—Å—Ç—å, –ø–∏—à–µ–º –≤ —Ñ–∞–π–ª <code>/mnt/random.file</code>:</p><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dd <span class=k>if</span><span class=o>=</span>/dev/urandom <span class=nv>of</span><span class=o>=</span>/mnt/random.file <span class=nv>bs</span><span class=o>=</span>10M <span class=nv>count</span><span class=o>=</span><span class=m>10</span> </span></span></code></pre></div></div><p>FS –Ω–µ—Ç(<strong>—ç—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —É–Ω–∏—á—Ç–æ–∂–∏—Ç FS, –µ—Å–ª–∏ –æ–Ω–∞ –µ—Å—Ç—å!</strong>):</p><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dd <span class=k>if</span><span class=o>=</span>/dev/urandom <span class=nv>of</span><span class=o>=</span>/dev/vgdata/lvmirror <span class=nv>bs</span><span class=o>=</span>10M <span class=nv>count</span><span class=o>=</span><span class=m>10</span></span></span></code></pre></div></div><p>–í–∫–ª—é—á–∞–µ–º –¥–∏—Å–∫ <code>sdX</code> –æ–±—Ä–∞—Ç–Ω–æ:</p><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> running &gt; /sys/block/sdX/device/state</span></span></code></pre></div></div><p>–°–º–æ—Ç—Ä–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</p><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lvs -a -o +devices,lv_health_status</span></span></code></pre></div></div><div class=code-block><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>LV                  VG     Attr       LSize Cpy%Sync Devices                                   Health
</span></span><span class=line><span class=cl>lvmirror            vgdata rwi-aor-r- 3.00g 100.00   lvmirror_rimage_0(0),lvmirror_rimage_1(0) refresh needed
</span></span><span class=line><span class=cl>[lvmirror_rimage_0] vgdata Iwi-aor-r- 3.00g          /dev/sdX1(1)                              refresh needed
</span></span><span class=line><span class=cl>[lvmirror_rimage_1] vgdata iwi-aor--- 3.00g          /dev/sdY1(1)
</span></span><span class=line><span class=cl>[lvmirror_rmeta_0]  vgdata ewi-aor-r- 4.00m          /dev/sdX1(0)                              refresh needed
</span></span><span class=line><span class=cl>[lvmirror_rmeta_1]  vgdata ewi-aor--- 4.00m          /dev/sdY1(0)</span></span></code></pre></div></div><p>–û—à–∏–±–∫–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∏—Å–∫–∞ –ø—Ä–æ–ø–∞–ª–∏, –Ω–æ —Å—Ç–∞—Ç—É—Å <code>Health</code> –∏–∑–º–µ–Ω–∏–ª—Å—è –Ω–∞ <code>refresh needed</code></p><h4 id=—á–∏–Ω–∏–º>–ß–∏–Ω–∏–º
<a class=heading-link href=#%d1%87%d0%b8%d0%bd%d0%b8%d0%bc><i class="fa-solid fa-link" aria-hidden=true title="–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫"></i>
<span class=sr-only>–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫</span></a></h4><p>–ó–∞–ø—É—Å–∫–∞–µ–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –∫–æ–º–∞–Ω–¥–æ–π:</p><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lvchange --refresh /dev/vgdata/lvmirror</span></span></code></pre></div></div><p>–ù–æ –µ—Å–ª–∏ –¥–∏—Å–∫ –≤—ã–ø–∞–ª, —è –±—ã —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–ª –µ–≥–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –Ω–æ–≤—ã–π, –ø—Ä–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–≤ –µ–≥–æ <a href=#–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è>–∫–∞–∫ –≤ –Ω–∞—á–∞–ª–µ —Å—Ç–∞—Ç—å–∏</a>
–∏ –¥–æ–±–∞–≤–∏–≤ –≤ PV –∏ VG:</p><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pvcreate /dev/sdZ1
</span></span><span class=line><span class=cl>vgextend vgdata /dev/sdZ1</span></span></code></pre></div></div><p>–ò –∑–∞–º–µ–Ω–∏–≤ –¥–∏—Å–∫ —É –∑–µ—Ä–∫–∞–ª–∞:</p><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lvconvert --replace /dev/sdX1 /dev/vgdata/lvmirror /dev/sdZ1</span></span></code></pre></div></div><h3 id=–∑–∞–º–µ–Ω–∞-–º—ë—Ä—Ç–≤–æ–≥–æ-–¥–∏—Å–∫–∞>–ó–∞–º–µ–Ω–∞ –º—ë—Ä—Ç–≤–æ–≥–æ –¥–∏—Å–∫–∞
<a class=heading-link href=#%d0%b7%d0%b0%d0%bc%d0%b5%d0%bd%d0%b0-%d0%bc%d1%91%d1%80%d1%82%d0%b2%d0%be%d0%b3%d0%be-%d0%b4%d0%b8%d1%81%d0%ba%d0%b0><i class="fa-solid fa-link" aria-hidden=true title="–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫"></i>
<span class=sr-only>–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫</span></a></h3><p>–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –ø—Ä–æ—Å–∏–º—É–ª–∏—Ä—É–µ–º –∑–∞–º–µ–Ω—É –º—ë—Ä—Ç–≤–æ–≥–æ –¥–∏—Å–∫–∞, –¥–ª—è —ç—Ç–æ–≥–æ –Ω–∞–º –ø—Ä–∏–¥—ë—Ç—Å—è —Å—Ç–µ—Ä–µ—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–∞—à–µ–≥–æ –¥–∏—Å–∫–∞, —á—Ç–æ–±—ã –æ–Ω –≤—ã–≥–ª—è–¥–µ–ª –∫–∞–∫ –Ω–æ–≤—ã–π:<br><strong>–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —É–Ω–∏—á—Ç–æ–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ –¥–∏—Å–∫–µ!</strong></p><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dd <span class=k>if</span><span class=o>=</span>/dev/zero <span class=nv>of</span><span class=o>=</span>/dev/sdX <span class=nv>bs</span><span class=o>=</span>10M <span class=nv>count</span><span class=o>=</span><span class=m>1</span></span></span></code></pre></div></div><p>–ü—Ä–∏ –≤—ã–∑–æ–≤–µ</p><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lvs -a -o +devices,lv_health_status</span></span></code></pre></div></div><p>–ú—ã —É–≤–∏–¥–∏–º —Ç–æ—Ç –∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —á—Ç–æ –∏ –ø—Ä–∏ –æ—Ç–≤–∞–ª–µ –¥–∏—Å–∫–∞, —Å—Ç–∞—Ç—É—Å <code>Health</code> —Å—Ç–∞–ª <code>partial</code>, –Ω–æ —á–∏–Ω–∏—Ç—Å—è —ç—Ç–æ –ø–æ –¥—Ä—É–≥–æ–º—É.</p><h4 id=—á–∏–Ω–∏–º-1>–ß–∏–Ω–∏–º
<a class=heading-link href=#%d1%87%d0%b8%d0%bd%d0%b8%d0%bc-1><i class="fa-solid fa-link" aria-hidden=true title="–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫"></i>
<span class=sr-only>–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫</span></a></h4><p>–£–¥–∞–ª–∏–º —Å—Ç–∞—Ä—ã–π –¥–∏—Å–∫ –∏–∑ VG</p><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vgreduce --removemissing --force vgdata</span></span></code></pre></div></div><p>–¢–∞–∫ –∫–∞–∫ –º—ã —Å—Ç—ë—Ä–ª–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–∏—Å–∫–∞, –Ω–∞–º –ø—Ä–∏–¥—ë—Ç—Å—è <a href=#–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è>–ø—Ä–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å</a>
–¥–∏—Å–∫ –∑–∞–Ω–æ–≤–æ –∏ –¥–æ–±–∞–≤–∏—Ç—å –µ–≥–æ –≤ PV –∏ VG:</p><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pvcreate /dev/sdX1
</span></span><span class=line><span class=cl>vgextend vgdata /dev/sdX1</span></span></code></pre></div></div><p>–ò –Ω—É–∂–Ω–æ –ø–æ—á–∏–Ω–∏—Ç—å –Ω–∞—à–µ –∑–µ—Ä–∫–∞–ª–æ</p><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lvconvert --repair /dev/vgdata/lvmirror</span></span></code></pre></div></div><p>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è —Ä–µ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è.</p><h3 id=–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º-–ª–æ–≥–∏—á–µ—Å–∫–∏–π-–¥–∏—Å–∫-–∏–∑-raid-1-–≤-–æ–±—ã—á–Ω—ã–π>–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –ª–æ–≥–∏—á–µ—Å–∫–∏–π –¥–∏—Å–∫ –∏–∑ RAID 1 –≤ –æ–±—ã—á–Ω—ã–π
<a class=heading-link href=#%d0%ba%d0%be%d0%bd%d0%b2%d0%b5%d1%80%d1%82%d0%b8%d1%80%d1%83%d0%b5%d0%bc-%d0%bb%d0%be%d0%b3%d0%b8%d1%87%d0%b5%d1%81%d0%ba%d0%b8%d0%b9-%d0%b4%d0%b8%d1%81%d0%ba-%d0%b8%d0%b7-raid-1-%d0%b2-%d0%be%d0%b1%d1%8b%d1%87%d0%bd%d1%8b%d0%b9><i class="fa-solid fa-link" aria-hidden=true title="–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫"></i>
<span class=sr-only>–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫</span></a></h3><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lvconvert -m0 /dev/vgdata/lvmirror</span></span></code></pre></div></div><h3 id=–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º-–ª–æ–≥–∏—á–µ—Å–∫–∏–π-–¥–∏—Å–∫-–∏–∑-–æ–±—ã—á–Ω–æ–≥–æ-–≤-raid-1>–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –ª–æ–≥–∏—á–µ—Å–∫–∏–π –¥–∏—Å–∫ –∏–∑ –æ–±—ã—á–Ω–æ–≥–æ –≤ RAID 1
<a class=heading-link href=#%d0%ba%d0%be%d0%bd%d0%b2%d0%b5%d1%80%d1%82%d0%b8%d1%80%d1%83%d0%b5%d0%bc-%d0%bb%d0%be%d0%b3%d0%b8%d1%87%d0%b5%d1%81%d0%ba%d0%b8%d0%b9-%d0%b4%d0%b8%d1%81%d0%ba-%d0%b8%d0%b7-%d0%be%d0%b1%d1%8b%d1%87%d0%bd%d0%be%d0%b3%d0%be-%d0%b2-raid-1><i class="fa-solid fa-link" aria-hidden=true title="–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫"></i>
<span class=sr-only>–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫</span></a></h3><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lvconvert -m1 /dev/vgdata/lvmirror</span></span></code></pre></div></div><h3 id=—É–≤–µ–ª–∏—á–∏–≤–∞–µ–º-—Ä–∞–∑–º–µ—Ä-–¥–∏—Å–∫–∞-—Å-–∑–µ—Ä–∫–∞–ª–æ–º>–£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä –¥–∏—Å–∫–∞ —Å –∑–µ—Ä–∫–∞–ª–æ–º
<a class=heading-link href=#%d1%83%d0%b2%d0%b5%d0%bb%d0%b8%d1%87%d0%b8%d0%b2%d0%b0%d0%b5%d0%bc-%d1%80%d0%b0%d0%b7%d0%bc%d0%b5%d1%80-%d0%b4%d0%b8%d1%81%d0%ba%d0%b0-%d1%81-%d0%b7%d0%b5%d1%80%d0%ba%d0%b0%d0%bb%d0%be%d0%bc><i class="fa-solid fa-link" aria-hidden=true title="–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫"></i>
<span class=sr-only>–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫</span></a></h3><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>umount /dev/vgdata/lvmirror
</span></span><span class=line><span class=cl><span class=c1># –î–æ–±–∞–≤–ª—è–µ–º 5GB –∫ –¥–∏—Å–∫—É</span>
</span></span><span class=line><span class=cl>lvresize --resizefs --size +5G /dev/vgdata/lvmirror
</span></span><span class=line><span class=cl><span class=c1># –°–º–æ—Ç—Ä–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç</span>
</span></span><span class=line><span class=cl>lvs</span></span></code></pre></div></div><h3 id=—É–º–µ–Ω—å—à–∞–µ–º-—Ä–∞–∑–º–µ—Ä-–¥–∏—Å–∫–∞-—Å-–∑–µ—Ä–∫–∞–ª–æ–º>–£–º–µ–Ω—å—à–∞–µ–º —Ä–∞–∑–º–µ—Ä –¥–∏—Å–∫–∞ —Å –∑–µ—Ä–∫–∞–ª–æ–º
<a class=heading-link href=#%d1%83%d0%bc%d0%b5%d0%bd%d1%8c%d1%88%d0%b0%d0%b5%d0%bc-%d1%80%d0%b0%d0%b7%d0%bc%d0%b5%d1%80-%d0%b4%d0%b8%d1%81%d0%ba%d0%b0-%d1%81-%d0%b7%d0%b5%d1%80%d0%ba%d0%b0%d0%bb%d0%be%d0%bc><i class="fa-solid fa-link" aria-hidden=true title="–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫"></i>
<span class=sr-only>–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫</span></a></h3><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>umount /dev/vgdata/lvmirror
</span></span><span class=line><span class=cl><span class=c1># –î–µ–ª–∞–µ–º –¥–∏—Å–∫ —Ä–∞–≤–Ω—ã–º 4GB</span>
</span></span><span class=line><span class=cl>lvresize --resizefs --size 4G /dev/vgdata/lvmirror
</span></span><span class=line><span class=cl><span class=c1># –°–º–æ—Ç—Ä–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç</span>
</span></span><span class=line><span class=cl>lvs</span></span></code></pre></div></div><h2 id=–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
<a class=heading-link href=#%d0%bc%d0%be%d0%bd%d0%b8%d1%82%d0%be%d1%80%d0%b8%d0%bd%d0%b3><i class="fa-solid fa-link" aria-hidden=true title="–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫"></i>
<span class=sr-only>–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫</span></a></h2><p>–î–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è LVM —è –Ω–∞–ø–∏—Å–∞–ª exporter –¥–ª—è prometheus<br><a href=https://github.com/ghostiam/lvm_exporter class=external-link target=_blank rel="external noopener">lvm_exporter</a></p><h2 id=–∫–∞–∫-—è-–≤—Å—ë-—Å–ª–æ–º–∞–ª>–ö–∞–∫ —è –≤—Å—ë —Å–ª–æ–º–∞–ª
<a class=heading-link href=#%d0%ba%d0%b0%d0%ba-%d1%8f-%d0%b2%d1%81%d1%91-%d1%81%d0%bb%d0%be%d0%bc%d0%b0%d0%bb><i class="fa-solid fa-link" aria-hidden=true title="–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫"></i>
<span class=sr-only>–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫</span></a></h2><p>–ü–æ–∫–∞ –ø–∏—Å–∞–ª —Å—Ç–∞—Ç—å—é, —É—Å–ø–µ–ª —Å–ª–æ–º–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π LVM</p><h3 id=inconsistent-metadata>Inconsistent metadata
<a class=heading-link href=#inconsistent-metadata><i class="fa-solid fa-link" aria-hidden=true title="–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫"></i>
<span class=sr-only>–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫</span></a></h3><p>–ö–æ–≥–¥–∞ –æ—Ç–∫–ª—é—á–∏–ª –¥–∏—Å–∫, —è —Ä–µ—à–∏–ª —É–¥–∞–ª–∏—Ç—å –ª–∏—à–Ω–µ–µ –∑–µ—Ä–∫–∞–ª–æ (—É –º–µ–Ω—è –±—ã–ª–æ 2 LV –∑–µ—Ä–∫–∞–ª—å–Ω—ã—Ö), –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥–∏—Å–∫–∞ –æ–±—Ä–∞—Ç–Ω–æ, —É –º–µ–Ω—è –ø–æ—è–≤–∏–ª–∞—Å—å –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ª—é–±–æ–π –∫–æ–º–∞–Ω–¥–µ LVM:</p><div class=code-block><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>WARNING: ignoring metadata seqno 20 on /dev/sdX1 for seqno 21 on /dev/sdY1 for VG vgdata.
</span></span><span class=line><span class=cl>WARNING: Inconsistent metadata found for VG vgdata
</span></span><span class=line><span class=cl>WARNING: outdated PV /dev/sdX1 seqno 20 has been removed in current VG vgdata seqno 21.</span></span></code></pre></div></div><p>–ü–æ—Å–ª–µ –¥–æ–ª–≥–∏—Ö –ø–æ–∏—Å–∫–æ–≤, –Ω–∞—à—ë–ª –Ω—É–∂–Ω—É—é –º–Ω–µ –∫–æ–º–∞–Ω–¥—É –≤ –±–∞–≥—Ç—Ä–µ–∫–µ—Ä–µ <sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup>, –∫–æ—Ç–æ—Ä–∞—è –º–Ω–µ –ø–æ–º–æ–≥–ª–∞:</p><div class=code-block><div class=lang-name>Bash</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vgck --updatemetadata vgdata</span></span></code></pre></div></div><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://tldp.org/HOWTO/LVM-HOWTO/initdisks.html class=external-link target=_blank rel="external noopener">The Linux Documentation Project (LDP) - LVM HOWTO - Initializing disks or disk partitions</a>
&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html/logical_volume_manager_administration/lvm_components#multiple_partitions class=external-link target=_blank rel="external noopener">Red Hat - LVM 3.1.2. Multiple Partitions on a Disk</a>
&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p><a href=https://linux-lvm.redhat.narkive.com/OJFDsxWy/simulating-lvm-mirror-failure-and-recovery#post12 class=external-link target=_blank rel="external noopener">Simulating LVM Mirror Failure and recovery</a>
&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p><a href="https://bugzilla.redhat.com/show_bug.cgi?id=1747585" class=external-link target=_blank rel="external noopener">Bug 1747585 - vgextend segfaults if attempting to extend using device that was previous removed and volumes were deleted</a>
&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><div class=post-tags><a href=/ru/tags/linux/>#linux</a><a href=/ru/tags/lvm/>#lvm</a><a href=/ru/tags/raid/>#raid</a></div><footer><div class=comments><script>let getTheme=window.localStorage&&window.localStorage.getItem("colorscheme");getTheme=getTheme??"";let s=document.createElement("script");s.src="https://giscus.app/client.js",s.setAttribute("data-repo","ghostiam/ghostiam-blog-comments"),s.setAttribute("data-repo-id","MDEwOlJlcG9zaXRvcnkyODI3MjU5MzI="),s.setAttribute("data-category","Announcements"),s.setAttribute("data-category-id","DIC_kwDOENoOLM4CdxhZ"),s.setAttribute("data-mapping","pathname"),s.setAttribute("data-strict","0"),s.setAttribute("data-reactions-enabled","1"),s.setAttribute("data-emit-metadata","0"),s.setAttribute("data-input-position","bottom"),s.setAttribute("data-theme",getTheme),s.setAttribute("data-lang","ru"),s.setAttribute("data-loading",""),s.setAttribute("crossorigin","anonymous"),s.setAttribute("async",""),document.querySelector("div.comments").innerHTML="",document.querySelector("div.comments").appendChild(s)</script></div></footer></article></section></div><footer class=footer><section class=container>¬©
2020 -
2025
GhostIAm (Vladislav Fursov)
¬∑
–†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.<br>–≠—Ç–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –ª–∏—Ü–µ–Ω–∑–∏–∏ <a class=theme-link rel=license href=http://creativecommons.org/licenses/by/4.0/>Creative Commons Attribution 4.0 International License</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script><script src=/js/custom.min.82aadaf649133639d24e9f2aefc6749704469783302b6b1db02b9a814aed35f4.js integrity="sha256-gqra9kkTNjnSTp8q78Z0lwRGl4MwK2sdsCuagUrtNfQ="></script><script src=/js/count.min.03fc03205b8079652971402407382f0f1557a5cacab4c54eaad00b14be58a2d8.js data-goatcounter=https://stats.ghostiam.dev/count async integrity="sha256-A/wDIFuAeWUpcUAkBzgvDxVXpcrKtMVOqtALFL5Yotg="></script></body></html>